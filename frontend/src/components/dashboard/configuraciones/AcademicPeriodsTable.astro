---
import type { AcademicPeriod } from "@lib/types/enrollment";

interface Props {
  periods: AcademicPeriod[];
}

const { periods } = Astro.props;
---

<div
  class="overflow-hidden rounded-3xl border border-white/20 bg-white/40 shadow-xl shadow-gray-200/50 backdrop-blur-md"
>
  <table class="w-full border-collapse text-left">
    <thead>
      <tr class="border-b border-gray-100 bg-gray-50/50">
        <th
          class="px-6 py-5 text-xs font-bold tracking-widest text-gray-400 uppercase"
          >Nombre del Periodo</th
        >
        <th
          class="px-6 py-5 text-center text-xs font-bold tracking-widest text-gray-400 uppercase"
          >Estado</th
        >
        <th
          class="px-6 py-5 text-center text-xs font-bold tracking-widest text-gray-400 uppercase"
          >Acciones</th
        >
      </tr>
    </thead>
    <tbody class="divide-y divide-gray-100/50">
      {
        periods.length === 0 ? (
          <tr>
            <td colspan="3" class="px-6 py-20 text-center">
              <div class="flex flex-col items-center gap-3">
                <span class="text-4xl opacity-50">üìÇ</span>
                <p class="font-medium text-gray-400">
                  No hay periodos acad√©micos registrados
                </p>
              </div>
            </td>
          </tr>
        ) : (
          periods.map((period) => (
            <tr class="group transition-colors duration-200 hover:bg-gray-50/80">
              <td class="px-6 py-4">
                <span class="group-hover:text-rayito-blue text-base font-semibold text-gray-800 transition-colors">
                  {period.name}
                </span>
              </td>
              <td class="px-6 py-4 text-center">
                <span
                  class={`inline-flex items-center rounded-full px-4 py-1.5 text-xs font-bold ring-1 ring-inset ${
                    period.active
                      ? "bg-emerald-50 text-emerald-700 ring-emerald-600/10"
                      : "bg-gray-50 text-gray-600 ring-gray-600/10"
                  } `}
                >
                  <span
                    class={`mr-1.5 h-1.5 w-1.5 rounded-full ${period.active ? "bg-emerald-500" : "bg-gray-400"}`}
                  />
                  {period.active ? "Activo" : "Inactivo"}
                </span>
              </td>
              <td class="px-6 py-4 text-center">
                <button
                  onclick={`window.dispatchEvent(new CustomEvent('open-update-period-sideover', { detail: { period: ${JSON.stringify(period)} } }))`}
                  class="hover:text-rayito-blue hover:bg-rayito-blue/5 rounded-lg p-2 text-gray-400 transition-colors"
                >
                  <span class="text-lg">‚öôÔ∏è</span>
                </button>
              </td>
            </tr>
          ))
        )
      }
    </tbody>
  </table>
</div>
