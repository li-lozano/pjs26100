---
import type { Student } from "@lib/types/student";
import { getStudentStatusConfig } from "@lib/utils/studentStatus";
import type { Enrollment } from "@lib/types/enrollment";
import { getEnrollmentStatusConfig } from "@lib/utils/enrollmentStatus";


interface Props {
  status: Student['student_status'];
  studentEnrollments: Enrollment[];
}

const { status, studentEnrollments } = Astro.props;

const enrollmentCode = studentEnrollments[0]?.code;
const currentStudentStatus = getStudentStatusConfig(status);
const currentEnrollmentStatus = getEnrollmentStatusConfig(studentEnrollments[0]?.enrollment_status);
---

{currentStudentStatus && (
  <div class="mt-3 flex flex-row space-x-2 justify-between">
    <div class="flex flex-col items-center gap-2">
      <p>Estado:</p>
      <span class={
        `inline-block 
        ${currentStudentStatus.bgIndex} 
        ${currentStudentStatus.textIndex} 
        px-4 py-2 rounded-lg text-xs font-medium`}>
        {currentStudentStatus.label}
      </span>
    </div>
    <div class="flex flex-col items-center gap-2">           
        {enrollmentCode && (
          <p>Código de Matrícula:</p>
          <span class={
            `inline-block 
            ${currentEnrollmentStatus?.bgIndex} 
            ${currentEnrollmentStatus?.textIndex}   
            px-4 py-2 rounded-lg text-xs font-medium`}>
            {
              studentEnrollments[0].enrollment_status === 'Pagado' ? enrollmentCode : currentEnrollmentStatus?.label
            }
          </span>
        )}
    </div>
  </div>
)}
